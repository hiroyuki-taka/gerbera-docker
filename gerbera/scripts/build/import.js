!function(){"use strict";var e,t=function(){return(t=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=/.*\/(.)\/([0-9]{4})([0-4]Q) (.*)\/(.*?)(-[0-9]+年[0-9]+月[0-9]+日[0-9]+時[0-9]+分)?(-cm)?\.mp4$/;function a(e){var a=e.location.match(i),o=function(e,t){if(e&&e.length>0){var i=e.substring(0,e.lastIndexOf("/"));return"/"===(a=t.substring(i.length,t.lastIndexOf("/"))).charAt(0)?a.substring(1).split("/"):a.split("/")}var a,o;return""!==(a=function(e){var t=e.split("/");return t.length>1&&t[t.length-2]?t[t.length-2]:""}(t))?[(o=a,o.replace(/\\/g,"\\\\").replace(/\//g,"\\/"))]:[]}(object_script_path,e.location);print("addVideo::Item",a,o);var r={video:{title:"Video",objectType:OBJECT_TYPE_CONTAINER,upnpclass:UPNP_CLASS_CONTAINER,metaData:[]},title:{title:"Title",objectType:OBJECT_TYPE_CONTAINER,upnpclass:UPNP_CLASS_CONTAINER},directories:{title:"Directories",objectType:OBJECT_TYPE_CONTAINER,upnpclass:UPNP_CLASS_CONTAINER},season:{title:"Season",objectType:OBJECT_TYPE_CONTAINER,upnpclass:UPNP_CLASS_CONTAINER},parentItem:{title:"...",objectType:OBJECT_TYPE_CONTAINER,upnpclass:UPNP_CLASS_CONTAINER,metaData:[],res:e.res,aux:e.aux,refID:e.id}};if(a){a[0];var s=a[1],c=a[2],n=a[3],p=a[4],l=a[5],T=a[6],d=a[7];if(T)e.meta[M_DATE]=T.replace(/-([0-9]+)年([0-9]+)月([0-9]+)日[0-9]+時[0-9]+分/,"$1-$2-$3");else switch(n){case"1Q":e.meta[M_DATE]=c+"-01-01";break;case"2Q":e.meta[M_DATE]=c+"-04-01";break;case"3Q":e.meta[M_DATE]=c+"-07-01";break;case"4Q":e.meta[M_DATE]=c+"-10-01"}if(print("addVideo::meta",JSON.stringify(e.meta)),"-cm"===d){var C={title:p,objectType:OBJECT_TYPE_CONTAINER,upnpclass:UPNP_CLASS_CONTAINER},N={title:s,objectType:OBJECT_TYPE_CONTAINER,upnpclass:UPNP_CLASS_CONTAINER},E={title:c,objectType:OBJECT_TYPE_CONTAINER,upnpclass:UPNP_CLASS_CONTAINER},_={title:n,objectType:OBJECT_TYPE_CONTAINER,upnpclass:UPNP_CLASS_CONTAINER};addCdsObject(t({},e),addContainerTree([r.video,r.title,C,t(t({},r.parentItem),{title:"CM"})])),addCdsObject(t({},e),addContainerTree([r.video,r.directories,N,C,t(t({},r.parentItem),{title:"CM"})])),addCdsObject(t({},e),addContainerTree([r.video,r.season,E,_,C,t(t({},r.parentItem),{title:"CM"})]))}else e=t(t({},e),{title:l}),N={title:s,objectType:OBJECT_TYPE_CONTAINER,upnpclass:UPNP_CLASS_CONTAINER},E={title:c,objectType:OBJECT_TYPE_CONTAINER,upnpclass:UPNP_CLASS_CONTAINER},_={title:n,objectType:OBJECT_TYPE_CONTAINER,upnpclass:UPNP_CLASS_CONTAINER},addCdsObject(t({},e),addContainerTree([r.video,r.title,t(t({},r.parentItem),{title:p})])),addCdsObject(t({},e),addContainerTree([r.video,r.directories,N,t(t({},r.parentItem),{title:p})])),addCdsObject(t({},e),addContainerTree([r.video,r.season,E,_,t(t({},r.parentItem),{title:p})]))}}if(""==("audio/x-mpegurl"===(e=orig.mimetype)?"m3u":"audio/x-scpls"===e?"pls":"video/x-ms-asf"==e||"video/x-ms-asx"===e?"asx":"")){var o=orig.mimetype.split("/")[0],r=t(t({},orig),{refID:orig.id}),s=orig.upnpclass;switch(config["/import/scripting/virtual-layout/attribute::audio-layout"],s){case"object.item.videoItem":case"object.item.videoItem.movie":a(r);break;case"object.item.audioItem":case"object.item.audioItem.multiTrack":case"object.item.audioItem.audioBook":case"object.item.audioItem.audioBroadcast":default:switch(print("Unable to handle upnp class: "+s+" for "+r.location),"video"===o&&r.onlineservice===ONLINE_SERVICE_APPLE_TRAILERS&&(o="trailer"),"application/ogg"===orig.mimetype&&(o=1===orig.theora?"video":"audio"),o){case"video":a(r);break;default:print("Unable to handle mime type: "+orig.mimetype+" for "+r.location)}}}}();
//# sourceMappingURL=import.js.map